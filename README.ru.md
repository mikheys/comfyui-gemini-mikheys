[English](./README.md) | [Русский](./README.ru.md)

# ComfyUI Нода "Nano banana"

![Нода Nano banana](./images/screenshot.png)

Этот репозиторий содержит кастомную ноду "Nano banana" для ComfyUI, предназначенную для продвинутого редактирования изображений с помощью Google Gemini API.

Проект основан на оригинальном репозитории [Visionatrix/ComfyUI-Gemini](https://github.com/Visionatrix/ComfyUI-Gemini).

## Возможности

Нода "Nano banana" позволяет выполнять контекстно-зависимое редактирование изображений, принимая на вход:
- Основное изображение для изменения.
- Одно или несколько референсных изображений (для стиля, паттернов и т.д.).
- Описательный текстовый промпт, подробно описывающий желаемые изменения.

## Как использовать

1.  **`image_to_edit`**: Подключите основное изображение, которое вы хотите изменить, к этому входу. Выходное изображение сохранит соотношение сторон этого изображения.
2.  **`reference_image_1` / `reference_image_2` / `reference_image_3` / `reference_image_4` / `reference_image_5`**: Используйте эти входы для любых референсных изображений, таких как текстуры, узоры или примеры стиля, которые вы хотите применить к основному изображению.
3.  **`prompt`**: Напишите описательный, повествовательный промпт, объясняющий правку. Например: "На основном изображении измени цвет стен на насыщенный красный, используя текстуру с референсного изображения."

## Выходы

- **`image`**: Полученное отредактированное изображение. В случае ошибки будет выведено черное изображение для предотвращения сбоев рабочего процесса.
- **`status`**: Строка, указывающая статус генерации:
    - "Complete": Генерация изображения прошла успешно.
    - "Error: Prompt or image was blocked by safety filters.": Gemini API отказался генерировать контент из-за настроек безопасности.
    - "Error: Could not decode image from API response: [details]": API вернул данные, которые не удалось интерпретировать как изображение.
    - "Error: [other details]": Произошла общая ошибка во время обработки или связи с API.

